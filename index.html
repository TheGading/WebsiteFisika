<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Keseimbangan Fisika dalam Transportasi Darat</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header/Beranda */
        .hero {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: white;
            position: relative;
            overflow: hidden;
        }

        .hero-content {
            z-index: 2;
            animation: fadeInUp 1s ease-out;
        }

        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .hero p {
            font-size: 1.3rem;
            margin-bottom: 30px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .truck-illustration {
            font-size: 8rem;
            margin: 30px 0;
            animation: bounce 2s infinite;
        }

        .btn {
            display: inline-block;
            padding: 15px 40px;
            background: #ff6b6b;
            color: white;
            text-decoration: none;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: bold;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .btn:hover {
            background: #ee5a52;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        /* Section Umum */
        section {
            padding: 80px 0;
            background: white;
        }

        section:nth-child(even) {
            background: #f8f9fa;
        }

        .section-title {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 50px;
            color: #667eea;
        }

        /* Materi Fisika */
        .concept-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }

        .concept-card {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }

        .concept-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .concept-card h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.5rem;
        }

        .concept-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }

        .formula {
            background: #f0f0f0;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 1.2rem;
            text-align: center;
            border-left: 4px solid #667eea;
        }

        /* Game Simulasi */
        .game-container {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            max-width: 900px;
            margin: 0 auto;
        }

        .canvas-container {
            background: linear-gradient(135deg, #e8f4f8 0%, #f0e8f8 100%);
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            border: 3px solid #667eea;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.2);
            position: relative;
            overflow: hidden;
        }

        .canvas-container::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(102, 126, 234, 0.1) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
        }

        canvas {
            display: block;
            margin: 0 auto;
            background: linear-gradient(180deg, #87CEEB 0%, #f0f0f0 60%, #555 100%);
            border-radius: 10px;
            position: relative;
            z-index: 1;
            box-shadow: 0 5px 20px rgba(0,0,0,0.15);
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .controls {
            margin: 30px 0;
        }

        .control-group {
            margin: 25px 0;
        }

        .control-group label {
            display: block;
            font-weight: bold;
            margin-bottom: 10px;
            color: #667eea;
            font-size: 1.1rem;
        }

        .slider-marks {
            display: flex;
            justify-content: space-between;
            margin-top: 5px;
            font-size: 0.85rem;
            color: #999;
        }

        .control-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            margin-top: 30px;
        }

        .control-btn {
            padding: 12px 20px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .control-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0,0,0,0.3);
        }

        .control-btn:active {
            transform: translateY(-1px);
        }

        .reset-btn {
            background: linear-gradient(135deg, #9e9e9e 0%, #757575 100%);
        }

        .preset-btn {
            background: linear-gradient(135deg, #4caf50 0%, #66bb6a 100%);
        }

        .preset-btn.danger {
            background: linear-gradient(135deg, #f44336 0%, #e57373 100%);
        }

        .speed-btn {
            padding: 10px 15px;
            border: 2px solid white;
            border-radius: 8px;
            font-size: 0.95rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            background: rgba(255, 255, 255, 0.2);
            color: white;
        }

        .speed-btn:hover {
            background: rgba(255, 255, 255, 0.4);
            transform: scale(1.05);
        }

        .speed-btn:active {
            transform: scale(0.98);
        }

        input[type="range"] {
            width: 100%;
            height: 10px;
            border-radius: 5px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            outline: none;
            -webkit-appearance: none;
            transition: all 0.3s;
            box-shadow: 0 2px 10px rgba(102, 126, 234, 0.3);
        }

        input[type="range"]:hover {
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.5);
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 3px 10px rgba(102, 126, 234, 0.5);
            border: 3px solid white;
        }

        input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.3);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.8);
        }

        input[type="range"]::-webkit-slider-thumb:active {
            transform: scale(1.1);
        }

        input[type="range"]::-moz-range-thumb {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 3px 10px rgba(102, 126, 234, 0.5);
            border: 3px solid white;
        }

        input[type="range"]::-moz-range-thumb:hover {
            transform: scale(1.3);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.8);
        }

        .info-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .info-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .info-box:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.5);
        }

        .info-box .label {
            font-size: 0.9rem;
            opacity: 0.9;
            margin-bottom: 5px;
        }

        .info-box .value {
            font-size: 1.8rem;
            font-weight: bold;
            text-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .status-indicator {
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            font-size: 1.5rem;
            font-weight: bold;
            margin: 20px 0;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .status-seimbang {
            background: linear-gradient(135deg, #4caf50 0%, #66bb6a 100%);
            color: white;
            animation: glowGreen 2s ease-in-out infinite;
        }

        .status-tidak-seimbang {
            background: linear-gradient(135deg, #f44336 0%, #e57373 100%);
            color: white;
            animation: shake 0.5s infinite, glowRed 1s ease-in-out infinite;
        }

        @keyframes glowGreen {
            0%, 100% {
                box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4);
            }
            50% {
                box-shadow: 0 5px 30px rgba(76, 175, 80, 0.8);
            }
        }

        @keyframes glowRed {
            0%, 100% {
                box-shadow: 0 5px 15px rgba(244, 67, 54, 0.4);
            }
            50% {
                box-shadow: 0 5px 30px rgba(244, 67, 54, 0.8);
            }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        /* Quiz */
        .quiz-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .question {
            background: white;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .question h3 {
            color: #667eea;
            margin-bottom: 20px;
        }

        .options {
            list-style: none;
        }

        .options li {
            padding: 15px;
            margin: 10px 0;
            background: #f8f9fa;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }

        .options li:hover {
            background: #e8f4f8;
            transform: translateX(10px);
        }

        .options li.selected {
            border-color: #667eea;
            background: #e8f4f8;
        }

        .options li.correct {
            background: #4caf50;
            color: white;
            border-color: #4caf50;
        }

        .options li.wrong {
            background: #f44336;
            color: white;
            border-color: #f44336;
        }

        .feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: 10px;
            display: none;
        }

        .feedback.show {
            display: block;
        }

        .feedback.correct {
            background: #e8f5e9;
            color: #2e7d32;
            border-left: 4px solid #4caf50;
        }

        .feedback.wrong {
            background: #ffebee;
            color: #c62828;
            border-left: 4px solid #f44336;
        }

        .quiz-score {
            text-align: center;
            font-size: 2rem;
            margin: 30px 0;
            padding: 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
        }

        /* Kesimpulan */
        .conclusion {
            text-align: center;
            max-width: 800px;
            margin: 0 auto;
        }

        .conclusion-points {
            text-align: left;
            margin: 30px 0;
        }

        .conclusion-points li {
            margin: 15px 0;
            padding-left: 30px;
            position: relative;
        }

        .conclusion-points li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: #4caf50;
            font-weight: bold;
            font-size: 1.5rem;
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2rem;
            }

            .hero p {
                font-size: 1rem;
            }

            .truck-illustration {
                font-size: 5rem;
            }

            .section-title {
                font-size: 2rem;
            }

            .game-container {
                padding: 20px;
            }

            canvas {
                max-width: 100%;
                height: auto;
            }

            .control-buttons {
                grid-template-columns: 1fr;
            }

            .info-panel {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            .hero h1 {
                font-size: 1.5rem;
            }

            canvas {
                width: 100%;
                height: 300px;
            }
        }

        .example-box {
            background: #fff3e0;
            border-left: 4px solid #ff9800;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
        }

        .example-box h4 {
            color: #ff9800;
            margin-bottom: 10px;
        }

        .safety-warning {
            background: #ffebee;
            border-left: 4px solid #f44336;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
        }

        .safety-warning h4 {
            color: #f44336;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <!-- BERANDA -->
    <section class="hero">
        <div class="hero-content">
            <h1>‚öñÔ∏è Keseimbangan Fisika dalam Transportasi Darat</h1>
            <p>Pelajari bagaimana prinsip fisika keseimbangan menjaga keselamatan kendaraan di jalan raya!</p>
            <div class="truck-illustration">üöö</div>
            <a href="#materi" class="btn">Mulai Belajar üöÄ</a>
        </div>
    </section>

    <!-- MATERI FISIKA -->
    <section id="materi">
        <div class="container">
            <h2 class="section-title">üìö Materi Fisika Keseimbangan</h2>
            
            <div class="concept-grid">
                <div class="concept-card">
                    <div class="concept-icon">‚öñÔ∏è</div>
                    <h3>Keseimbangan Statis</h3>
                    <p>Kondisi benda diam dan tidak bergerak. Semua gaya yang bekerja saling meniadakan.</p>
                    <div class="formula">Œ£F = 0</div>
                    <p><small>Resultan semua gaya sama dengan nol</small></p>
                </div>

                <div class="concept-card">
                    <div class="concept-icon">üèÉ</div>
                    <h3>Keseimbangan Dinamis</h3>
                    <p>Kondisi benda bergerak dengan kecepatan konstan. Percepatan sama dengan nol.</p>
                    <div class="formula">Œ£F = 0, v = konstan</div>
                    <p><small>Mobil melaju stabil di jalan lurus</small></p>
                </div>

                <div class="concept-card">
                    <div class="concept-icon">üîÑ</div>
                    <h3>Momen Gaya (Torsi)</h3>
                    <p>Kemampuan gaya untuk memutar benda terhadap suatu titik poros.</p>
                    <div class="formula">M = F √ó l</div>
                    <p><small>M = Momen gaya, F = Gaya, l = Lengan gaya</small></p>
                </div>

                <div class="concept-card">
                    <div class="concept-icon">üéØ</div>
                    <h3>Titik Berat</h3>
                    <p>Titik tangkap resultan gaya berat yang bekerja pada benda. Lokasi pusat massa.</p>
                    <div class="formula">xÃÑ = Œ£(m¬∑x) / Œ£m</div>
                    <p><small>Posisi titik berat menentukan kestabilan</small></p>
                </div>
            </div>

            <div style="margin-top: 50px;">
                <h3 style="color: #667eea; margin-bottom: 20px;">üìê Syarat Keseimbangan</h3>
                <p style="font-size: 1.1rem; margin-bottom: 20px;">Agar sebuah benda (seperti truk) tetap seimbang, harus memenuhi dua syarat:</p>
                
                <div class="concept-grid">
                    <div class="concept-card">
                        <h3>1Ô∏è‚É£ Resultan Gaya = 0</h3>
                        <div class="formula">Œ£F = 0</div>
                        <p>Semua gaya yang bekerja pada benda harus saling meniadakan dalam arah horizontal dan vertikal.</p>
                    </div>
                    
                    <div class="concept-card">
                        <h3>2Ô∏è‚É£ Resultan Momen = 0</h3>
                        <div class="formula">Œ£M = 0</div>
                        <p>Momen gaya searah jarum jam harus sama dengan momen gaya berlawanan jarum jam.</p>
                    </div>
                </div>

                <div class="example-box">
                    <h4>üöö Contoh: Truk Bermuatan</h4>
                    <p><strong>Gaya-gaya yang bekerja:</strong></p>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Gaya berat truk (W‚ÇÅ) ke bawah</li>
                        <li>Gaya berat muatan (W‚ÇÇ) ke bawah</li>
                        <li>Gaya normal roda kiri (N‚ÇÅ) ke atas</li>
                        <li>Gaya normal roda kanan (N‚ÇÇ) ke atas</li>
                    </ul>
                    <p style="margin-top: 15px;"><strong>Syarat seimbang:</strong></p>
                    <div class="formula">N‚ÇÅ + N‚ÇÇ = W‚ÇÅ + W‚ÇÇ</div>
                    <div class="formula">N‚ÇÅ √ó d‚ÇÅ = N‚ÇÇ √ó d‚ÇÇ</div>
                </div>
            </div>
        </div>
    </section>

    <!-- KONSEP TRANSPORTASI -->
    <section id="transportasi">
        <div class="container">
            <h2 class="section-title">üöõ Keseimbangan dalam Transportasi</h2>
            
            <div class="concept-grid">
                <div class="concept-card">
                    <div class="concept-icon">‚ö†Ô∏è</div>
                    <h3>Bahaya Truk Terguling</h3>
                    <p>Truk bisa terguling ketika titik berat berada di luar bidang tumpuan roda. Ini terjadi saat:</p>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Muatan terlalu tinggi</li>
                        <li>Muatan tidak rata</li>
                        <li>Belok terlalu tajam</li>
                        <li>Kecepatan berlebih di tikungan</li>
                    </ul>
                </div>

                <div class="concept-card">
                    <div class="concept-icon">üì¶</div>
                    <h3>Pengaruh Posisi Muatan</h3>
                    <p>Posisi muatan sangat mempengaruhi titik berat kendaraan:</p>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li><strong>Muatan di kiri:</strong> Titik berat bergeser ke kiri</li>
                        <li><strong>Muatan di kanan:</strong> Titik berat bergeser ke kanan</li>
                        <li><strong>Muatan di tengah:</strong> Titik berat tetap stabil</li>
                    </ul>
                </div>

                <div class="concept-card">
                    <div class="concept-icon">üîª</div>
                    <h3>Pentingnya Titik Berat Rendah</h3>
                    <p>Kendaraan dengan titik berat rendah lebih stabil karena:</p>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Momen gaya yang dibutuhkan untuk menggulingkan lebih besar</li>
                        <li>Lebih tahan terhadap gaya dorong angin</li>
                        <li>Lebih aman saat menikung</li>
                    </ul>
                </div>

                <div class="concept-card">
                    <div class="concept-icon">üõ°Ô∏è</div>
                    <h3>Dampak Keselamatan</h3>
                    <p>Keseimbangan yang buruk dapat menyebabkan:</p>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Kecelakaan terguling</li>
                        <li>Kerusakan barang</li>
                        <li>Bahaya bagi pengendara lain</li>
                        <li>Kerugian material besar</li>
                    </ul>
                </div>
            </div>

            <div class="safety-warning" style="margin-top: 40px;">
                <h4>‚ö†Ô∏è Peringatan Keselamatan</h4>
                <p><strong>Faktor yang meningkatkan risiko truk terguling:</strong></p>
                <ul style="margin-left: 20px; margin-top: 10px;">
                    <li>Muatan tidak diikat dengan baik</li>
                    <li>Distribusi berat tidak merata</li>
                    <li>Kecepatan tinggi saat berbelok</li>
                    <li>Jalan licin atau tidak rata</li>
                    <li>Angin kencang dari samping</li>
                </ul>
                <p style="margin-top: 15px;"><strong>Selalu pastikan muatan terpasang aman dan seimbang!</strong></p>
            </div>
        </div>
    </section>

    <!-- GAME SIMULASI -->
    <section id="game">
        <div class="container">
            <h2 class="section-title">üéÆ Load Balance Truck - Simulasi Interaktif</h2>
            
            <div class="game-container">
                <p style="text-align: center; font-size: 1.2rem; margin-bottom: 30px;">
                    Atur berat dan posisi muatan untuk menjaga keseimbangan truk!
                </p>

                <div class="canvas-container">
                    <canvas id="truckCanvas" width="800" height="400"></canvas>
                </div>

                <div class="controls">
                    <div class="control-group">
                        <label for="beratSlider">
                            ‚öñÔ∏è Berat Muatan: <span id="beratValue">500</span> kg
                        </label>
                        <input type="range" id="beratSlider" min="100" max="1000" value="500" step="50">
                        <div class="slider-marks">
                            <span>100 kg</span>
                            <span>550 kg</span>
                            <span>1000 kg</span>
                        </div>
                    </div>

                    <div class="control-group">
                        <label for="posisiSlider">
                            üìç Posisi Muatan: <span id="posisiValue">0</span> cm (dari pusat)
                        </label>
                        <input type="range" id="posisiSlider" min="-100" max="100" value="0" step="10">
                        <div class="slider-marks">
                            <span>Kiri</span>
                            <span>Tengah</span>
                            <span>Kanan</span>
                        </div>
                    </div>

                    <div class="control-buttons">
                        <button class="control-btn reset-btn" onclick="resetSimulation()">üîÑ Reset</button>
                        <button class="control-btn preset-btn" onclick="setPreset('stabil')">‚úÖ Posisi Aman</button>
                        <button class="control-btn preset-btn danger" onclick="setPreset('bahaya')">‚ö†Ô∏è Posisi Bahaya</button>
                        <button class="control-btn" onclick="toggleAutoPlay()">
                            <span id="autoPlayIcon">‚ñ∂Ô∏è</span> <span id="autoPlayText">Auto Play</span>
                        </button>
                    </div>

                    <div style="margin-top: 20px; padding: 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 15px; color: white;">
                        <h4 style="margin-bottom: 15px; text-align: center;">üöó Kontrol Kecepatan Truk</h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 10px;">
                            <button class="speed-btn" onclick="setSpeed(0)">‚è∏Ô∏è Berhenti</button>
                            <button class="speed-btn" onclick="setSpeed(2)">üêå Pelan</button>
                            <button class="speed-btn" onclick="setSpeed(5)">üöó Sedang</button>
                            <button class="speed-btn" onclick="setSpeed(8)">üèéÔ∏è Cepat</button>
                        </div>
                        <div style="margin-top: 15px; text-align: center;">
                            <div style="font-size: 0.9rem; opacity: 0.9;">Kecepatan Saat Ini</div>
                            <div style="font-size: 2rem; font-weight: bold;" id="speedDisplay">0 km/h</div>
                        </div>
                    </div>
                </div>

                <div class="info-panel">
                    <div class="info-box">
                        <div class="label">Momen Kiri</div>
                        <div class="value" id="momenKiri">0</div>
                        <div class="label">N¬∑m</div>
                    </div>
                    <div class="info-box">
                        <div class="label">Momen Kanan</div>
                        <div class="value" id="momenKanan">0</div>
                        <div class="label">N¬∑m</div>
                    </div>
                    <div class="info-box">
                        <div class="label">Posisi Titik Berat</div>
                        <div class="value" id="titikBerat">0</div>
                        <div class="label">cm</div>
                    </div>
                </div>

                <div id="statusIndicator" class="status-indicator status-seimbang">
                    üü¢ SEIMBANG
                </div>

                <div class="example-box">
                    <h4>üí° Penjelasan Fisika</h4>
                    <p id="penjelasanFisika">
                        Truk dalam kondisi seimbang! Titik berat berada di antara kedua roda, sehingga momen gaya terdistribusi dengan baik.
                    </p>
                    <p style="margin-top: 15px;"><strong>Rumus yang digunakan:</strong></p>
                    <div class="formula">M = F √ó l</div>
                    <p style="margin-top: 10px;">Di mana F adalah gaya berat (massa √ó gravitasi) dan l adalah jarak dari titik poros.</p>
                </div>

                <div style="background: #e3f2fd; border-left: 4px solid #2196f3; padding: 15px; margin: 20px 0; border-radius: 10px;">
                    <h4 style="color: #2196f3; margin-bottom: 10px;">‚å®Ô∏è Kontrol Keyboard</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; font-size: 0.9rem;">
                        <div><strong>‚Üê ‚Üí</strong> Geser Posisi</div>
                        <div><strong>‚Üë ‚Üì</strong> Ubah Berat</div>
                        <div><strong>Spasi</strong> Play/Pause</div>
                        <div><strong>R</strong> Reset</div>
                    </div>
                    <p style="margin-top: 10px; font-size: 0.85rem; opacity: 0.8;">üí° Klik pada canvas untuk membuat partikel!</p>
                </div>

                <div class="safety-warning">
                    <h4>üéì Tips Keselamatan</h4>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Muatan harus diletakkan sedekat mungkin dengan pusat truk</li>
                        <li>Hindari muatan yang terlalu berat di satu sisi</li>
                        <li>Pastikan titik berat selalu berada di antara bidang tumpuan roda</li>
                        <li>Semakin rendah posisi muatan, semakin stabil truk</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- QUIZ -->
    <section id="quiz">
        <div class="container">
            <h2 class="section-title">üìù Quiz Fisika Keseimbangan</h2>
            
            <div class="quiz-container">
                <div class="question" data-answer="2">
                    <h3>Pertanyaan 1</h3>
                    <p>Apa syarat utama agar sebuah truk berada dalam keseimbangan statis?</p>
                    <ul class="options">
                        <li data-value="0">Kecepatan truk harus konstan</li>
                        <li data-value="1">Muatan harus seberat mungkin</li>
                        <li data-value="2">Resultan gaya dan resultan momen sama dengan nol</li>
                        <li data-value="3">Truk harus bergerak pelan</li>
                    </ul>
                    <div class="feedback"></div>
                </div>

                <div class="question" data-answer="1">
                    <h3>Pertanyaan 2</h3>
                    <p>Mengapa truk bisa terguling saat berbelok terlalu tajam?</p>
                    <ul class="options">
                        <li data-value="0">Karena ban truk aus</li>
                        <li data-value="1">Karena titik berat bergeser keluar dari bidang tumpuan roda</li>
                        <li data-value="2">Karena mesin truk terlalu kuat</li>
                        <li data-value="3">Karena jalan terlalu sempit</li>
                    </ul>
                    <div class="feedback"></div>
                </div>

                <div class="question" data-answer="2">
                    <h3>Pertanyaan 3</h3>
                    <p>Jika muatan truk diletakkan terlalu tinggi, apa yang terjadi?</p>
                    <ul class="options">
                        <li data-value="0">Truk akan lebih cepat</li>
                        <li data-value="1">Truk akan lebih irit bahan bakar</li>
                        <li data-value="2">Titik berat menjadi tinggi dan truk lebih mudah terguling</li>
                        <li data-value="3">Tidak ada pengaruh terhadap keseimbangan</li>
                    </ul>
                    <div class="feedback"></div>
                </div>

                <div class="question" data-answer="0">
                    <h3>Pertanyaan 4</h3>
                    <p>Rumus momen gaya adalah M = F √ó l. Apa yang dimaksud dengan 'l'?</p>
                    <ul class="options">
                        <li data-value="0">Jarak dari titik poros ke titik tangkap gaya (lengan gaya)</li>
                        <li data-value="1">Panjang truk</li>
                        <li data-value="2">Lebar jalan</li>
                        <li data-value="3">Kecepatan truk</li>
                    </ul>
                    <div class="feedback"></div>
                </div>

                <div class="question" data-answer="1">
                    <h3>Pertanyaan 5</h3>
                    <p>Di mana posisi terbaik meletakkan muatan berat pada truk?</p>
                    <ul class="options">
                        <li data-value="0">Di bagian belakang truk</li>
                        <li data-value="1">Di tengah dan serendah mungkin</li>
                        <li data-value="2">Di bagian depan truk</li>
                        <li data-value="3">Dimana saja tidak masalah</li>
                    </ul>
                    <div class="feedback"></div>
                </div>

                <div id="quizScore" class="quiz-score" style="display: none;">
                    Skor Anda: <span id="scoreValue">0</span>/5
                </div>

                <div style="text-align: center; margin-top: 30px;">
                    <button class="btn" onclick="checkAllAnswers()">Cek Jawaban üìä</button>
                </div>
            </div>
        </div>
    </section>

    <!-- KESIMPULAN -->
    <section id="kesimpulan">
        <div class="container">
            <h2 class="section-title">üéØ Kesimpulan</h2>
            
            <div class="conclusion">
                <p style="font-size: 1.2rem; margin-bottom: 30px;">
                    Keseimbangan fisika adalah kunci utama keselamatan transportasi darat!
                </p>

                <div class="concept-card" style="margin-bottom: 30px;">
                    <h3>Konsep Utama yang Dipelajari:</h3>
                    <ul class="conclusion-points">
                        <li>Keseimbangan terjadi ketika resultan gaya (Œ£F) dan resultan momen (Œ£M) sama dengan nol</li>
                        <li>Titik berat kendaraan menentukan kestabilan dan keselamatan</li>
                        <li>Momen gaya (M = F √ó l) menjelaskan kemampuan gaya untuk memutar benda</li>
                        <li>Posisi dan distribusi muatan sangat mempengaruhi keseimbangan truk</li>
                        <li>Titik berat yang rendah dan berada di tengah membuat kendaraan lebih stabil</li>
                    </ul>
                </div>

                <div class="safety-warning">
                    <h4>üö¶ Manfaat Memahami Keseimbangan:</h4>
                    <ul style="margin-left: 20px; margin-top: 15px;">
                        <li><strong>Keselamatan:</strong> Mengurangi risiko kecelakaan terguling</li>
                        <li><strong>Efisiensi:</strong> Mengoptimalkan cara memuat barang</li>
                        <li><strong>Ekonomi:</strong> Mencegah kerusakan barang dan kendaraan</li>
                        <li><strong>Hukum:</strong> Memahami standar keselamatan transportasi</li>
                    </ul>
                </div>

                <div class="example-box" style="margin-top: 30px;">
                    <h4>üí¨ Pesan Keselamatan</h4>
                    <p style="font-size: 1.1rem;">
                        <strong>"Fisika bukan hanya teori di buku, tapi pengetahuan yang menyelamatkan nyawa!"</strong>
                    </p>
                    <p style="margin-top: 15px;">
                        Dengan memahami prinsip keseimbangan, kita bisa membuat keputusan yang lebih cerdas saat berkendara atau mengangkut barang. Selalu pastikan muatan kendaraan seimbang dan aman!
                    </p>
                </div>

                <div style="margin-top: 40px; text-align: center;">
                    <p style="font-size: 1.3rem; color: #667eea; font-weight: bold;">
                        üöÄ Terus Belajar dan Berkendara dengan Aman! üöÄ
                    </p>
                </div>
            </div>
        </div>
    </section>

    <script>
        // Konstanta
        const g = 10; // Percepatan gravitasi (m/s¬≤)
        const massaTruk = 2000; // kg
        const jarakRoda = 200; // cm (jarak antar roda)

        // Canvas setup
        const canvas = document.getElementById('truckCanvas');
        const ctx = canvas.getContext('2d');

        // Animation variables
        let currentBerat = 500;
        let currentPosisi = 0;
        let targetBerat = 500;
        let targetPosisi = 0;
        let animationFrame;
        let particles = [];
        let warningParticles = [];
        let confetti = [];
        let trails = [];
        let isAutoPlay = false;
        let autoPlayDirection = 1;
        let lastStatus = true;
        let explosionTriggered = false;
        let roadOffset = 0;
        let isDriving = false;
        let speed = 0;
        let targetSpeed = 0;
        let backgroundOffset = 0;
        let smokeParticles = [];

        // Slider elements
        const beratSlider = document.getElementById('beratSlider');
        const posisiSlider = document.getElementById('posisiSlider');
        const beratValue = document.getElementById('beratValue');
        const posisiValue = document.getElementById('posisiValue');

        // Info elements
        const momenKiriEl = document.getElementById('momenKiri');
        const momenKananEl = document.getElementById('momenKanan');
        const titikBeratEl = document.getElementById('titikBerat');
        const statusIndicator = document.getElementById('statusIndicator');
        const penjelasanFisika = document.getElementById('penjelasanFisika');

        // Particle class
        class Particle {
            constructor(x, y, color, size = 3) {
                this.x = x;
                this.y = y;
                this.vx = (Math.random() - 0.5) * 4;
                this.vy = (Math.random() - 0.5) * 4 - 2;
                this.color = color;
                this.size = size;
                this.life = 1;
                this.decay = 0.02;
            }

            update() {
                this.x += this.vx;
                this.y += this.vy;
                this.vy += 0.1; // gravity
                this.life -= this.decay;
            }

            draw(ctx) {
                ctx.save();
                ctx.globalAlpha = this.life;
                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
                ctx.restore();
            }

            isDead() {
                return this.life <= 0;
            }
        }

        // Warning particle class (for danger state)
        class WarningParticle {
            constructor(x, y) {
                this.x = x;
                this.y = y;
                this.vx = (Math.random() - 0.5) * 3;
                this.vy = -Math.random() * 3 - 1;
                this.life = 1;
                this.decay = 0.015;
                this.size = Math.random() * 4 + 2;
            }

            update() {
                this.x += this.vx;
                this.y += this.vy;
                this.life -= this.decay;
            }

            draw(ctx) {
                ctx.save();
                ctx.globalAlpha = this.life;
                ctx.fillStyle = '#ff6b6b';
                ctx.font = `${this.size * 4}px Arial`;
                ctx.textAlign = 'center';
                ctx.fillText('‚ö†Ô∏è', this.x, this.y);
                ctx.restore();
            }

            isDead() {
                return this.life <= 0;
            }
        }

        // Confetti class (for success state)
        class Confetti {
            constructor(x, y) {
                this.x = x;
                this.y = y;
                this.vx = (Math.random() - 0.5) * 8;
                this.vy = -Math.random() * 10 - 5;
                this.life = 1;
                this.decay = 0.01;
                this.size = Math.random() * 6 + 3;
                this.colors = ['#FF6B6B', '#4ECDC4', '#45B7D1', '#FFA07A', '#98D8C8', '#FFD93D'];
                this.color = this.colors[Math.floor(Math.random() * this.colors.length)];
                this.rotation = Math.random() * Math.PI * 2;
                this.rotationSpeed = (Math.random() - 0.5) * 0.3;
            }

            update() {
                this.x += this.vx;
                this.y += this.vy;
                this.vy += 0.3; // gravity
                this.vx *= 0.99; // air resistance
                this.rotation += this.rotationSpeed;
                this.life -= this.decay;
            }

            draw(ctx) {
                ctx.save();
                ctx.globalAlpha = this.life;
                ctx.translate(this.x, this.y);
                ctx.rotate(this.rotation);
                ctx.fillStyle = this.color;
                ctx.fillRect(-this.size / 2, -this.size / 2, this.size, this.size);
                ctx.restore();
            }

            isDead() {
                return this.life <= 0;
            }
        }

        // Trail class (for load movement)
        class Trail {
            constructor(x, y, color) {
                this.x = x;
                this.y = y;
                this.life = 1;
                this.decay = 0.03;
                this.size = 8;
                this.color = color;
            }

            update() {
                this.life -= this.decay;
                this.size *= 0.95;
            }

            draw(ctx) {
                ctx.save();
                ctx.globalAlpha = this.life * 0.5;
                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
                ctx.restore();
            }

            isDead() {
                return this.life <= 0;
            }
        }

        // Smoke particle class (for exhaust)
        class SmokeParticle {
            constructor(x, y) {
                this.x = x;
                this.y = y;
                this.vx = -Math.random() * 2 - 1;
                this.vy = -Math.random() * 1 - 0.5;
                this.life = 1;
                this.decay = 0.02;
                this.size = Math.random() * 8 + 4;
            }

            update() {
                this.x += this.vx;
                this.y += this.vy;
                this.vx *= 0.98;
                this.vy *= 0.98;
                this.life -= this.decay;
                this.size += 0.2;
            }

            draw(ctx) {
                ctx.save();
                ctx.globalAlpha = this.life * 0.3;
                ctx.fillStyle = '#888';
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
                ctx.restore();
            }

            isDead() {
                return this.life <= 0;
            }
        }

        // Update values when sliders change
        beratSlider.addEventListener('input', function() {
            targetBerat = parseInt(this.value);
            beratValue.textContent = targetBerat;
        });

        posisiSlider.addEventListener('input', function() {
            targetPosisi = parseInt(this.value);
            posisiValue.textContent = targetPosisi;
        });

        function lerp(start, end, factor) {
            return start + (end - start) * factor;
        }

        function animate() {
            // Auto play logic
            if (isAutoPlay) {
                targetPosisi += autoPlayDirection * 2;
                if (targetPosisi >= 100 || targetPosisi <= -100) {
                    autoPlayDirection *= -1;
                }
                posisiSlider.value = targetPosisi;
                posisiValue.textContent = targetPosisi;
            }

            // Speed animation
            speed = lerp(speed, targetSpeed, 0.1);
            
            // Update road offset for driving effect
            if (speed > 0) {
                roadOffset += speed;
                backgroundOffset += speed * 0.3; // Parallax effect for background
                isDriving = true;
                
                // Create smoke particles while driving
                if (Math.random() < 0.3) {
                    const centerX = canvas.width / 2;
                    const groundY = canvas.height - 50;
                    smokeParticles.push(new SmokeParticle(centerX - 200, groundY - 20));
                }
            } else {
                isDriving = false;
            }

            // Update speed display
            document.getElementById('speedDisplay').textContent = Math.round(speed * 10) + ' km/h';

            // Smooth interpolation
            const lerpFactor = 0.15;
            currentBerat = lerp(currentBerat, targetBerat, lerpFactor);
            currentPosisi = lerp(currentPosisi, targetPosisi, lerpFactor);

            // Hitung fisika
            const physics = calculatePhysics(currentBerat, currentPosisi);

            // Trigger confetti when status changes to balanced
            if (physics.isSeimbang && !lastStatus && !explosionTriggered) {
                createConfettiExplosion();
                explosionTriggered = true;
            }
            if (!physics.isSeimbang) {
                explosionTriggered = false;
            }
            lastStatus = physics.isSeimbang;

            // Update info panel with animation
            updateInfoWithAnimation(physics);

            // Update status
            updateStatus(physics.isSeimbang);

            // Update penjelasan
            updatePenjelasan(physics);

            // Create trail effect
            const centerX = canvas.width / 2;
            const pixelsPerCm = 400 / 400;
            const loadX = centerX + (currentPosisi * pixelsPerCm);
            const loadY = canvas.height - 150 - Math.min(60, 30 + currentBerat / 20);
            
            if (Math.abs(targetBerat - currentBerat) > 1 || Math.abs(targetPosisi - currentPosisi) > 1) {
                trails.push(new Trail(loadX, loadY, physics.isSeimbang ? '#4CAF50' : '#FF9800'));
                
                if (Math.random() < 0.3) {
                    particles.push(new Particle(loadX, loadY, physics.isSeimbang ? '#4CAF50' : '#FF9800', 3));
                }
            }

            // Create warning particles if not balanced
            if (!physics.isSeimbang && Math.random() < 0.2) {
                warningParticles.push(new WarningParticle(loadX, canvas.height - 200));
            }

            // Update and filter all particles
            particles = particles.filter(p => {
                p.update();
                return !p.isDead();
            });

            warningParticles = warningParticles.filter(p => {
                p.update();
                return !p.isDead();
            });

            confetti = confetti.filter(c => {
                c.update();
                return !c.isDead();
            });

            trails = trails.filter(t => {
                t.update();
                return !t.isDead();
            });

            smokeParticles = smokeParticles.filter(s => {
                s.update();
                return !s.isDead();
            });

            // Draw canvas
            drawTruck(currentBerat, currentPosisi, physics);

            animationFrame = requestAnimationFrame(animate);
        }

        function createConfettiExplosion() {
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            for (let i = 0; i < 50; i++) {
                confetti.push(new Confetti(centerX, centerY));
            }
        }

        function resetSimulation() {
            targetBerat = 500;
            targetPosisi = 0;
            beratSlider.value = 500;
            posisiSlider.value = 0;
            beratValue.textContent = 500;
            posisiValue.textContent = 0;
            isAutoPlay = false;
            document.getElementById('autoPlayIcon').textContent = '‚ñ∂Ô∏è';
            document.getElementById('autoPlayText').textContent = 'Auto Play';
            targetSpeed = 0;
            
            // Create reset particles
            for (let i = 0; i < 30; i++) {
                particles.push(new Particle(
                    canvas.width / 2,
                    canvas.height / 2,
                    '#667eea',
                    4
                ));
            }
        }

        function setPreset(type) {
            if (type === 'stabil') {
                targetBerat = 400;
                targetPosisi = 0;
                beratSlider.value = 400;
                posisiSlider.value = 0;
                beratValue.textContent = 400;
                posisiValue.textContent = 0;
            } else if (type === 'bahaya') {
                targetBerat = 800;
                targetPosisi = 90;
                beratSlider.value = 800;
                posisiSlider.value = 90;
                beratValue.textContent = 800;
                posisiValue.textContent = 90;
            }
        }

        function toggleAutoPlay() {
            isAutoPlay = !isAutoPlay;
            const icon = document.getElementById('autoPlayIcon');
            const text = document.getElementById('autoPlayText');
            
            if (isAutoPlay) {
                icon.textContent = '‚è∏Ô∏è';
                text.textContent = 'Pause';
            } else {
                icon.textContent = '‚ñ∂Ô∏è';
                text.textContent = 'Auto Play';
            }
        }

        function setSpeed(newSpeed) {
            targetSpeed = newSpeed;
        }

        function updateInfoWithAnimation(physics) {
            animateValue(momenKiriEl, parseFloat(momenKiriEl.textContent), physics.momenKiri, 2);
            animateValue(momenKananEl, parseFloat(momenKananEl.textContent), physics.momenKanan, 2);
            animateValue(titikBeratEl, parseFloat(titikBeratEl.textContent), physics.titikBeratPos, 1);
        }

        function animateValue(element, start, end, decimals) {
            const current = isNaN(start) ? 0 : start;
            const target = lerp(current, end, 0.15);
            element.textContent = target.toFixed(decimals);
        }

        function calculatePhysics(beratMustan, posisiMustan) {
            // Konversi ke Newton
            const F_muatan = beratMustan * g;
            const F_truk = massaTruk * g;

            // Hitung posisi titik berat gabungan (dari pusat truk)
            const totalMassa = massaTruk + beratMustan;
            const titikBeratPos = (beratMustan * posisiMustan) / totalMassa;

            // Hitung momen terhadap titik pusat
            const momenMustan = F_muatan * Math.abs(posisiMustan) / 100;

            // Hitung beban pada masing-masing roda
            const jarakRodaM = jarakRoda / 100;
            
            const momenKanan = (F_truk + F_muatan) * (jarakRodaM / 2 + titikBeratPos / 100);
            const momenKiri = (F_truk + F_muatan) * (jarakRodaM / 2 - titikBeratPos / 100);

            // Cek keseimbangan
            const batasAman = jarakRoda / 2;
            const isSeimbang = Math.abs(titikBeratPos) <= batasAman;

            return {
                titikBeratPos: titikBeratPos,
                momenKiri: momenKiri,
                momenKanan: momenKanan,
                isSeimbang: isSeimbang,
                batasAman: batasAman
            };
        }

        function updateStatus(isSeimbang) {
            if (isSeimbang) {
                statusIndicator.className = 'status-indicator status-seimbang';
                statusIndicator.innerHTML = 'üü¢ SEIMBANG';
            } else {
                statusIndicator.className = 'status-indicator status-tidak-seimbang';
                statusIndicator.innerHTML = 'üî¥ TIDAK SEIMBANG - BAHAYA!';
            }
        }

        function updatePenjelasan(physics) {
            if (physics.isSeimbang) {
                penjelasanFisika.innerHTML = `
                    Truk dalam kondisi <strong>SEIMBANG</strong>! Titik berat berada pada posisi ${physics.titikBeratPos.toFixed(1)} cm dari pusat, 
                    masih berada di antara kedua roda (batas aman: ¬±${physics.batasAman} cm). 
                    Momen gaya terdistribusi dengan baik ke kedua roda.
                `;
            } else {
                penjelasanFisika.innerHTML = `
                    ‚ö†Ô∏è <strong>BAHAYA!</strong> Truk <strong>TIDAK SEIMBANG</strong>! Titik berat berada pada posisi ${physics.titikBeratPos.toFixed(1)} cm, 
                    sudah keluar dari bidang tumpuan roda (batas aman: ¬±${physics.batasAman} cm). 
                    Truk berisiko terguling ${physics.titikBeratPos > 0 ? 'ke kanan' : 'ke kiri'}!
                `;
            }
        }

        function drawTruck(beratMustan, posisiMustan, physics) {
            // Clear canvas with gradient
            const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
            gradient.addColorStop(0, '#87CEEB');
            gradient.addColorStop(0.6, '#E8F4F8');
            gradient.addColorStop(1, '#555');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Draw moving clouds with parallax
            drawMovingClouds();

            // Draw moving trees/buildings in background
            drawMovingBackground();

            // Draw trails first (behind truck)
            trails.forEach(t => t.draw(ctx));

            // Draw smoke particles
            smokeParticles.forEach(s => s.draw(ctx));

            // Setup posisi dan ukuran
            const centerX = canvas.width / 2;
            const groundY = canvas.height - 50;
            const truckWidth = 400;
            const truckHeight = 80;
            const wheelRadius = 25;
            const loadSize = Math.min(60, 30 + beratMustan / 20);

            // Hitung tilt angle jika tidak seimbang
            let tiltAngle = 0;
            if (!physics.isSeimbang) {
                tiltAngle = (physics.titikBeratPos / physics.batasAman) * 0.1;
            }

            // Gambar jalan dengan animasi bergerak
            drawMovingRoad(groundY);

            ctx.save();
            ctx.translate(centerX, groundY - wheelRadius);
            ctx.rotate(tiltAngle);
            ctx.translate(-centerX, -(groundY - wheelRadius));

            // Gambar shadow
            ctx.fillStyle = 'rgba(0,0,0,0.2)';
            ctx.beginPath();
            ctx.ellipse(centerX, groundY + 5, truckWidth / 2 + 20, 15, 0, 0, Math.PI * 2);
            ctx.fill();

            // Gambar badan truk dengan gradient
            const truckGradient = ctx.createLinearGradient(
                centerX - truckWidth / 2, 
                groundY - truckHeight - wheelRadius,
                centerX + truckWidth / 2, 
                groundY - wheelRadius
            );
            if (physics.isSeimbang) {
                truckGradient.addColorStop(0, '#66bb6a');
                truckGradient.addColorStop(1, '#4CAF50');
            } else {
                truckGradient.addColorStop(0, '#ef5350');
                truckGradient.addColorStop(1, '#f44336');
            }
            ctx.fillStyle = truckGradient;
            ctx.fillRect(centerX - truckWidth / 2, groundY - truckHeight - wheelRadius, truckWidth, truckHeight);
            
            // Border truk dengan glow
            ctx.shadowColor = physics.isSeimbang ? 'rgba(76, 175, 80, 0.5)' : 'rgba(244, 67, 54, 0.5)';
            ctx.shadowBlur = 10;
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 3;
            ctx.strokeRect(centerX - truckWidth / 2, groundY - truckHeight - wheelRadius, truckWidth, truckHeight);
            ctx.shadowBlur = 0;

            // Gambar detail truk (garis-garis)
            ctx.strokeStyle = 'rgba(255,255,255,0.3)';
            ctx.lineWidth = 2;
            for (let i = 0; i < 5; i++) {
                const x = centerX - truckWidth / 2 + (i + 1) * (truckWidth / 6);
                ctx.beginPath();
                ctx.moveTo(x, groundY - truckHeight - wheelRadius);
                ctx.lineTo(x, groundY - wheelRadius);
                ctx.stroke();
            }

            // Gambar kabin dengan gradient
            const cabinGradient = ctx.createLinearGradient(
                centerX - truckWidth / 2 - 80,
                groundY - truckHeight - wheelRadius - 40,
                centerX - truckWidth / 2,
                groundY - wheelRadius
            );
            if (physics.isSeimbang) {
                cabinGradient.addColorStop(0, '#81c784');
                cabinGradient.addColorStop(1, '#66BB6A');
            } else {
                cabinGradient.addColorStop(0, '#e57373');
                cabinGradient.addColorStop(1, '#ef5350');
            }
            ctx.fillStyle = cabinGradient;
            ctx.fillRect(centerX - truckWidth / 2 - 80, groundY - truckHeight - wheelRadius - 40, 80, 80);
            ctx.strokeRect(centerX - truckWidth / 2 - 80, groundY - truckHeight - wheelRadius - 40, 80, 80);

            // Jendela kabin dengan refleksi
            const windowGradient = ctx.createLinearGradient(
                centerX - truckWidth / 2 - 70,
                groundY - truckHeight - wheelRadius - 30,
                centerX - truckWidth / 2 - 40,
                groundY - truckHeight - wheelRadius - 5
            );
            windowGradient.addColorStop(0, '#E3F2FD');
            windowGradient.addColorStop(1, '#90CAF9');
            ctx.fillStyle = windowGradient;
            ctx.fillRect(centerX - truckWidth / 2 - 70, groundY - truckHeight - wheelRadius - 30, 30, 25);
            ctx.strokeRect(centerX - truckWidth / 2 - 70, groundY - truckHeight - wheelRadius - 30, 30, 25);

            // Refleksi jendela
            ctx.fillStyle = 'rgba(255,255,255,0.6)';
            ctx.fillRect(centerX - truckWidth / 2 - 68, groundY - truckHeight - wheelRadius - 28, 10, 10);

            // Lampu depan (menyala saat jalan)
            if (isDriving) {
                ctx.save();
                ctx.shadowColor = '#ffeb3b';
                ctx.shadowBlur = 20;
                ctx.fillStyle = '#ffeb3b';
                ctx.beginPath();
                ctx.arc(centerX - truckWidth / 2 - 10, groundY - wheelRadius - 20, 5, 0, Math.PI * 2);
                ctx.fill();
                ctx.restore();
            }

            ctx.restore();

            // Gambar roda dengan animasi berputar
            const rodaKiriX = centerX - jarakRoda / 2;
            const rodaKananX = centerX + jarakRoda / 2;
            const wheelRotation = (roadOffset / 5) % (Math.PI * 2);

            drawWheel(rodaKiriX, groundY - wheelRadius, wheelRadius, wheelRotation);
            drawWheel(rodaKananX, groundY - wheelRadius, wheelRadius, wheelRotation);

            // Gambar muatan dengan shadow dan glow
            const pixelsPerCm = truckWidth / 400;
            const loadX = centerX + (posisiMustan * pixelsPerCm);
            const loadY = groundY - truckHeight - wheelRadius - loadSize;

            // Shadow muatan
            ctx.save();
            ctx.shadowColor = 'rgba(0,0,0,0.3)';
            ctx.shadowBlur = 15;
            ctx.shadowOffsetX = 5;
            ctx.shadowOffsetY = 5;

            const loadGradient = ctx.createLinearGradient(loadX - loadSize / 2, loadY, loadX + loadSize / 2, loadY + loadSize);
            loadGradient.addColorStop(0, '#FFB74D');
            loadGradient.addColorStop(1, '#FF9800');
            ctx.fillStyle = loadGradient;
            
            // Rounded corners untuk muatan
            roundRect(ctx, loadX - loadSize / 2, loadY, loadSize, loadSize, 8);
            ctx.fill();
            
            ctx.shadowBlur = 0;
            ctx.restore();

            ctx.strokeStyle = '#F57C00';
            ctx.lineWidth = 3;
            roundRect(ctx, loadX - loadSize / 2, loadY, loadSize, loadSize, 8);
            ctx.stroke();

            // Icon pada muatan
            ctx.fillStyle = '#fff';
            ctx.font = `${loadSize * 0.4}px Arial`;
            ctx.textAlign = 'center';
            ctx.fillText('üì¶', loadX, loadY + loadSize * 0.4);

            // Label muatan dengan background
            ctx.fillStyle = 'rgba(0,0,0,0.7)';
            const labelWidth = 60;
            const labelHeight = 20;
            roundRect(ctx, loadX - labelWidth / 2, loadY + loadSize - 25, labelWidth, labelHeight, 5);
            ctx.fill();
            
            ctx.fillStyle = '#fff';
            ctx.font = 'bold 12px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(Math.round(beratMustan) + ' kg', loadX, loadY + loadSize - 11);

            // Gambar titik berat dengan pulsing effect
            const titikBeratX = centerX + (physics.titikBeratPos * pixelsPerCm);
            const titikBeratY = groundY - wheelRadius - truckHeight / 2;
            const pulse = Math.sin(Date.now() / 200) * 2 + 8;

            // Outer glow
            ctx.save();
            ctx.shadowColor = 'red';
            ctx.shadowBlur = 20;
            ctx.fillStyle = 'red';
            ctx.beginPath();
            ctx.arc(titikBeratX, titikBeratY, pulse, 0, Math.PI * 2);
            ctx.fill();
            ctx.restore();

            // Inner circle
            ctx.fillStyle = '#ff1744';
            ctx.beginPath();
            ctx.arc(titikBeratX, titikBeratY, 6, 0, Math.PI * 2);
            ctx.fill();
            ctx.strokeStyle = '#fff';
            ctx.lineWidth = 2;
            ctx.stroke();

            // Label titik berat dengan background
            ctx.fillStyle = 'rgba(244, 67, 54, 0.9)';
            roundRect(ctx, titikBeratX - 45, titikBeratY - 35, 90, 20, 5);
            ctx.fill();
            
            ctx.fillStyle = '#fff';
            ctx.font = 'bold 11px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('‚¨§ Titik Berat', titikBeratX, titikBeratY - 21);

            // Garis vertikal titik berat dengan gradient
            const lineGradient = ctx.createLinearGradient(titikBeratX, titikBeratY, titikBeratX, groundY);
            lineGradient.addColorStop(0, 'rgba(255, 23, 68, 0.8)');
            lineGradient.addColorStop(1, 'rgba(255, 23, 68, 0.2)');
            ctx.strokeStyle = lineGradient;
            ctx.lineWidth = 2;
            ctx.setLineDash([5, 5]);
            ctx.beginPath();
            ctx.moveTo(titikBeratX, titikBeratY);
            ctx.lineTo(titikBeratX, groundY);
            ctx.stroke();
            ctx.setLineDash([]);

            // Gambar zona aman
            if (!physics.isSeimbang) {
                ctx.fillStyle = 'rgba(76, 175, 80, 0.15)';
                ctx.fillRect(rodaKiriX, groundY - 200, rodaKananX - rodaKiriX, 150);
                
                ctx.strokeStyle = '#4CAF50';
                ctx.lineWidth = 3;
                ctx.setLineDash([10, 5]);
                ctx.strokeRect(rodaKiriX, groundY - 200, rodaKananX - rodaKiriX, 150);
                ctx.setLineDash([]);

                // Label zona aman dengan background
                ctx.fillStyle = 'rgba(76, 175, 80, 0.9)';
                roundRect(ctx, centerX - 50, groundY - 225, 100, 25, 5);
                ctx.fill();
                
                ctx.fillStyle = '#fff';
                ctx.font = 'bold 14px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('ZONA AMAN', centerX, groundY - 206);
            }

            // Draw particles
            particles.forEach(p => p.draw(ctx));
            warningParticles.forEach(p => p.draw(ctx));
            
            // Draw confetti on top of everything
            confetti.forEach(c => c.draw(ctx));

            // Gambar panah gaya dengan animasi
            const arrowPulse = Math.sin(Date.now() / 300) * 3;
            drawArrow(ctx, loadX, loadY + loadSize, loadX, loadY + loadSize + 40 + arrowPulse, '#F44336', Math.round(beratMustan) + ' kg');

            // Label roda dengan background
            ctx.fillStyle = 'rgba(51, 51, 51, 0.8)';
            roundRect(ctx, rodaKiriX - 35, groundY + 30, 70, 20, 5);
            ctx.fill();
            roundRect(ctx, rodaKananX - 35, groundY + 30, 70, 20, 5);
            ctx.fill();
            
            ctx.fillStyle = '#fff';
            ctx.font = 'bold 12px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('Roda Kiri', rodaKiriX, groundY + 44);
            ctx.fillText('Roda Kanan', rodaKananX, groundY + 44);
        }

        function drawMovingClouds() {
            ctx.fillStyle = 'rgba(255, 255, 255, 0.6)';
            
            // Clouds move slower when truck moves (parallax)
            const cloudOffset = backgroundOffset * 0.5;
            
            drawCloud((100 - cloudOffset) % (canvas.width + 100), 40, 40);
            drawCloud((300 - cloudOffset * 0.7) % (canvas.width + 100), 60, 50);
            drawCloud((500 - cloudOffset * 0.9) % (canvas.width + 100), 30, 35);
            drawCloud((700 - cloudOffset * 0.6) % (canvas.width + 100), 50, 45);
        }

        function drawMovingBackground() {
            // Draw trees/buildings in background
            const bgOffset = backgroundOffset % 200;
            
            for (let i = -1; i < canvas.width / 200 + 2; i++) {
                const x = i * 200 - bgOffset;
                
                // Trees
                if (i % 2 === 0) {
                    drawTree(x, canvas.height - 150);
                } else {
                    // Buildings
                    drawBuilding(x, canvas.height - 150);
                }
            }
        }

        function drawTree(x, y) {
            // Trunk
            ctx.fillStyle = '#8B4513';
            ctx.fillRect(x - 5, y, 10, 30);
            
            // Leaves
            ctx.fillStyle = '#228B22';
            ctx.beginPath();
            ctx.arc(x, y - 10, 20, 0, Math.PI * 2);
            ctx.fill();
            ctx.beginPath();
            ctx.arc(x - 10, y, 15, 0, Math.PI * 2);
            ctx.fill();
            ctx.beginPath();
            ctx.arc(x + 10, y, 15, 0, Math.PI * 2);
            ctx.fill();
        }

        function drawBuilding(x, y) {
            ctx.fillStyle = '#708090';
            ctx.fillRect(x - 20, y - 50, 40, 50);
            
            // Windows
            ctx.fillStyle = '#FFD700';
            for (let row = 0; row < 3; row++) {
                for (let col = 0; col < 2; col++) {
                    ctx.fillRect(x - 15 + col * 15, y - 45 + row * 15, 8, 8);
                }
            }
        }

        function drawMovingRoad(groundY) {
            // Road
            ctx.fillStyle = '#555';
            ctx.fillRect(0, groundY, canvas.width, 50);
            
            // Road texture
            ctx.fillStyle = 'rgba(0,0,0,0.1)';
            const textureOffset = roadOffset % 30;
            for (let i = -textureOffset; i < canvas.width; i += 30) {
                ctx.fillRect(i, groundY, 20, 50);
            }
            
            // Moving road lines
            ctx.strokeStyle = '#ffeb3b';
            ctx.lineWidth = 3;
            ctx.setLineDash([20, 15]);
            
            const lineOffset = roadOffset % 35;
            ctx.beginPath();
            ctx.moveTo(-lineOffset, groundY + 25);
            ctx.lineTo(canvas.width, groundY + 25);
            ctx.stroke();
            ctx.setLineDash([]);
        }

        function drawCloud(x, y, size) {
            ctx.beginPath();
            ctx.arc(x, y, size * 0.5, 0, Math.PI * 2);
            ctx.arc(x + size * 0.4, y, size * 0.6, 0, Math.PI * 2);
            ctx.arc(x + size * 0.8, y, size * 0.5, 0, Math.PI * 2);
            ctx.fill();
        }

        function drawWheel(x, y, radius, rotation) {
            // Shadow
            ctx.save();
            ctx.shadowColor = 'rgba(0,0,0,0.3)';
            ctx.shadowBlur = 10;
            ctx.shadowOffsetY = 5;

            // Outer tire
            ctx.fillStyle = '#222';
            ctx.beginPath();
            ctx.arc(x, y, radius, 0, Math.PI * 2);
            ctx.fill();
            ctx.restore();

            // Tire groove
            ctx.strokeStyle = '#111';
            ctx.lineWidth = 2;
            ctx.stroke();

            // Rim with gradient
            const rimGradient = ctx.createRadialGradient(x, y, 0, x, y, radius * 0.6);
            rimGradient.addColorStop(0, '#ccc');
            rimGradient.addColorStop(0.5, '#999');
            rimGradient.addColorStop(1, '#666');
            ctx.fillStyle = rimGradient;
            ctx.beginPath();
            ctx.arc(x, y, radius * 0.6, 0, Math.PI * 2);
            ctx.fill();

            // Spokes (rotating)
            ctx.save();
            ctx.translate(x, y);
            ctx.rotate(rotation);
            ctx.strokeStyle = '#888';
            ctx.lineWidth = 3;
            for (let i = 0; i < 5; i++) {
                ctx.beginPath();
                ctx.moveTo(0, 0);
                ctx.lineTo(radius * 0.5, 0);
                ctx.stroke();
                ctx.rotate((Math.PI * 2) / 5);
            }
            ctx.restore();

            // Center cap
            ctx.fillStyle = '#aaa';
            ctx.beginPath();
            ctx.arc(x, y, radius * 0.2, 0, Math.PI * 2);
            ctx.fill();
        }

        function roundRect(ctx, x, y, width, height, radius) {
            if (ctx.roundRect) {
                ctx.roundRect(x, y, width, height, radius);
            } else {
                ctx.beginPath();
                ctx.moveTo(x + radius, y);
                ctx.lineTo(x + width - radius, y);
                ctx.quadraticCurveTo(x + width, y, x + width, y + radius);
                ctx.lineTo(x + width, y + height - radius);
                ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);
                ctx.lineTo(x + radius, y + height);
                ctx.quadraticCurveTo(x, y + height, x, y + height - radius);
                ctx.lineTo(x, y + radius);
                ctx.quadraticCurveTo(x, y, x + radius, y);
                ctx.closePath();
            }
        }

        function drawArrow(ctx, fromX, fromY, toX, toY, color, label) {
            const headLength = 12;
            const angle = Math.atan2(toY - fromY, toX - fromX);

            ctx.save();
            ctx.shadowColor = color;
            ctx.shadowBlur = 5;

            ctx.strokeStyle = color;
            ctx.fillStyle = color;
            ctx.lineWidth = 4;

            // Garis
            ctx.beginPath();
            ctx.moveTo(fromX, fromY);
            ctx.lineTo(toX, toY);
            ctx.stroke();

            // Kepala panah
            ctx.beginPath();
            ctx.moveTo(toX, toY);
            ctx.lineTo(toX - headLength * Math.cos(angle - Math.PI / 6), toY - headLength * Math.sin(angle - Math.PI / 6));
            ctx.lineTo(toX - headLength * Math.cos(angle + Math.PI / 6), toY - headLength * Math.sin(angle + Math.PI / 6));
            ctx.closePath();
            ctx.fill();

            ctx.restore();

            // Label dengan background
            if (label) {
                ctx.fillStyle = 'rgba(244, 67, 54, 0.9)';
                roundRect(ctx, fromX + 15, fromY + 10, 55, 20, 5);
                ctx.fill();
                
                ctx.fillStyle = '#fff';
                ctx.font = 'bold 12px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(label, fromX + 42, fromY + 24);
            }
        }

        // Quiz functionality
        let quizAnswers = {};

        document.querySelectorAll('.question').forEach((question, qIndex) => {
            const options = question.querySelectorAll('.options li');
            options.forEach(option => {
                option.addEventListener('click', function() {
                    // Remove selection from all options in this question
                    options.forEach(opt => opt.classList.remove('selected'));
                    // Add selection to clicked option
                    this.classList.add('selected');
                    // Store answer
                    quizAnswers[qIndex] = parseInt(this.getAttribute('data-value'));
                });
            });
        });

        function checkAllAnswers() {
            let score = 0;
            const questions = document.querySelectorAll('.question');
            
            questions.forEach((question, qIndex) => {
                const correctAnswer = parseInt(question.getAttribute('data-answer'));
                const userAnswer = quizAnswers[qIndex];
                const options = question.querySelectorAll('.options li');
                const feedback = question.querySelector('.feedback');

                // Reset classes
                options.forEach(opt => {
                    opt.classList.remove('correct', 'wrong');
                });

                // Check answer
                if (userAnswer === correctAnswer) {
                    score++;
                    options[correctAnswer].classList.add('correct');
                    feedback.className = 'feedback correct show';
                    feedback.textContent = '‚úì Benar! ' + getExplanation(qIndex);
                } else {
                    if (userAnswer !== undefined) {
                        options[userAnswer].classList.add('wrong');
                    }
                    options[correctAnswer].classList.add('correct');
                    feedback.className = 'feedback wrong show';
                    feedback.textContent = '‚úó Salah. ' + getExplanation(qIndex);
                }
            });

            // Show score
            const scoreDiv = document.getElementById('quizScore');
            const scoreValue = document.getElementById('scoreValue');
            scoreValue.textContent = score;
            scoreDiv.style.display = 'block';
            scoreDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }

        function getExplanation(qIndex) {
            const explanations = [
                'Keseimbangan statis memerlukan Œ£F = 0 dan Œ£M = 0.',
                'Titik berat yang keluar dari bidang tumpuan menyebabkan momen tidak seimbang.',
                'Titik berat tinggi mengurangi stabilitas dan memperbesar risiko terguling.',
                'Lengan gaya (l) adalah jarak perpendicular dari poros ke garis kerja gaya.',
                'Muatan di tengah dan rendah menjaga titik berat tetap stabil.'
            ];
            return explanations[qIndex];
        }

        // Smooth scrolling
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Initialize animation
        animate();

        // Add click interaction on canvas
        canvas.addEventListener('click', function(e) {
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            // Create particles at click position
            for (let i = 0; i < 10; i++) {
                particles.push(new Particle(x, y, '#667eea', 4));
            }
        });

        // Add mouse move trail
        let lastMouseX = 0;
        let lastMouseY = 0;
        canvas.addEventListener('mousemove', function(e) {
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            if (Math.random() < 0.1) {
                particles.push(new Particle(x, y, 'rgba(102, 126, 234, 0.5)', 2));
            }
            
            lastMouseX = x;
            lastMouseY = y;
        });

        // Keyboard controls
        document.addEventListener('keydown', function(e) {
            if (e.key === 'ArrowLeft') {
                targetPosisi = Math.max(-100, targetPosisi - 10);
                posisiSlider.value = targetPosisi;
                posisiValue.textContent = targetPosisi;
            } else if (e.key === 'ArrowRight') {
                targetPosisi = Math.min(100, targetPosisi + 10);
                posisiSlider.value = targetPosisi;
                posisiValue.textContent = targetPosisi;
            } else if (e.key === 'ArrowUp') {
                targetBerat = Math.min(1000, targetBerat + 50);
                beratSlider.value = targetBerat;
                beratValue.textContent = targetBerat;
            } else if (e.key === 'ArrowDown') {
                targetBerat = Math.max(100, targetBerat - 50);
                beratSlider.value = targetBerat;
                beratValue.textContent = targetBerat;
            } else if (e.key === ' ' || e.key === 'Spacebar') {
                e.preventDefault();
                toggleAutoPlay();
            } else if (e.key === 'r' || e.key === 'R') {
                resetSimulation();
            }
        });
    </script>
</body>
</html>
